<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Memorix - Web3 Memory Game</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† MEMORIX</h1>
            <p class="subtitle">Web3 Memory Challenge - Real-time Leaderboard Rankings!</p>
            <div class="wallet-section">
                <button class="wallet-btn" id="connectBtn">Connect MetaMask</button>
                <div class="wallet-address hidden" id="walletDisplay"></div>
            </div>
        </div>

        <div class="main-content">
            <div class="game-panel">
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="infinite">üéÆ Infinite Mode</button>
                    <button class="mode-btn" data-mode="daily">‚≠ê Daily Challenge</button>
                </div>

                <div id="dailyChallengeBanner" class="daily-challenge-banner hidden">
                    <h3>‚è∞ Today's Daily Challenge</h3>
                    <p>Complete perfectly to earn instant 0.01 ETH!</p>
                    <div class="challenge-info">
                        <div class="challenge-stat">
                            <div class="info-label">Grid Size</div>
                            <div id="challengeGrid">4x4</div>
                        </div>
                        <div class="challenge-stat">
                            <div class="info-label">Steps</div>
                            <div id="challengeSteps">8</div>
                        </div>
                        <div class="challenge-stat">
                            <div class="info-label">Tries Left</div>
                            <div id="challengeTries">3/3</div>
                        </div>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em;" id="challengeStatus">Loading...</p>
                </div>

                <div class="game-info">
                    <div class="info-card">
                        <div class="info-label" id="scoreLabel">Level</div>
                        <div class="info-value" id="scoreValue">1</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Total Score</div>
                        <div class="info-value" id="totalScore">0</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Pending Rewards</div>
                        <div class="info-value" id="pendingRewards">0 ETH</div>
                    </div>
                    <div class="info-card timer-card" id="timerCard">
                        <div class="info-label">Time Left</div>
                        <div class="info-value" id="timerValue">--</div>
                    </div>
                </div>

                <div id="status" class="status hidden"></div>

                <div id="grid" class="grid size-3"></div>

                <div class="controls">
                    <button class="btn btn-primary" id="startBtn" disabled>Connect Wallet to Play</button>
                    <button class="btn btn-success" id="withdrawBtn" disabled>Withdraw Rewards</button>
                </div>
            </div>

            <div class="side-panel">
                <div class="leaderboard">
                    <div class="leaderboard-title">
                        <span>üèÜ Live Leaderboard</span>
                        <span class="leaderboard-count" id="playerCount">0 players</span>
                    </div>
                    <div class="leaderboard-header">
                        <span style="width: 40px;">Rank</span>
                        <span style="flex: 1;">Player</span>
                        <span style="width: 60px;">Level</span>
                        <span style="width: 80px;">Score</span>
                    </div>
                    <div id="leaderboardList">
                        <p style="text-align: center; color: #999; padding: 20px;">Loading...</p>
                    </div>
                    <p style="text-align: center; margin-top: 15px; color: #999; font-size: 0.85em;">
                        Top 10 rewarded daily at 23:59 UTC<br>
                        Scores reset after payout
                    </p>
                </div>

                <div class="stats-section">
                    <h3 style="margin-bottom: 15px; color: #667eea;">üìä Your Stats</h3>
                    <div class="stat-row">
                        <span>Current Level</span>
                        <strong id="statCurrentLevel">1</strong>
                    </div>
                    <div class="stat-row">
                        <span>Total Rounds</span>
                        <strong id="statRounds">0</strong>
                    </div>
                    <div class="stat-row">
                        <span>Best Score</span>
                        <strong id="statBestScore">0</strong>
                    </div>
                    <div class="stat-row">
                        <span>Total Rewards</span>
                        <strong id="statTotalRewards">0 ETH</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="resultModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle">Round Complete!</div>
            <div class="modal-message" id="modalMessage"></div>
            <div class="modal-stats">
                <div class="modal-stat-row">
                    <span>Score:</span>
                    <strong id="modalScore">0</strong>
                </div>
                <div class="modal-stat-row">
                    <span>Correct Steps:</span>
                    <strong id="modalCorrect">0/0</strong>
                </div>
                <div class="modal-stat-row">
                    <span>Time Taken:</span>
                    <strong id="modalTime">0s</strong>
                </div>
                <div class="modal-stat-row hidden" id="modalRewardRow">
                    <span>Reward Earned:</span>
                    <strong id="modalReward">0 ETH</strong>
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-primary" id="modalContinueBtn">Continue</button>
                <button class="btn btn-primary" id="modalCloseBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- toast container -->
    <div id="toastContainer"></div>

    <script src="script.js"></script>
    <script src="memorixBot.js"></script>
    <script src="telemetryTracker.js"></script>
</body>
</html>
